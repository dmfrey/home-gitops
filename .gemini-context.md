# System Context for Gemini

This file provides a quick refresher on the hardware, software, and goals of this homelab environment.

## 1. Hardware

- **Nodes:** 3x GEEKOM Mini IT13 Mini PCs.
- **CPU:** Intel 13th Gen.
- **Disk Layout (per node):**
  - **System Drive (OS & etcd):** 1x SATA SSD (Intel DC S3500 - `SSDSC2BB48`). This drive must remain SATA.
  - **Ceph Storage:** 1x M.2 NVMe SSD used for a `rook-ceph` cluster.
  - **OpenEBS Storage:** 1x M.2 SSD (in the former Wi-Fi slot) used for `openebs`.

## 2. Software & Orchestration

- **Operating System:** Talos Linux.
- **Orchestrator:** Kubernetes.
  - **Version:** Talos-flavored Kubernetes v1.35.0 (corresponding to Talos OS v1.12.3).
- **CNI:** Cilium.
- **Storage Services:** `rook-ceph` and `openebs`.
- **Backup Solution:** `volsync` is used for backing up PVCs.

## 3. Configuration & Philosophy

- **Configuration:**
  - The repository follows a GitOps workflow.
  - Talos machine configurations are managed via Jinja2 templates (`.j2`).
  - Secrets are managed in 1Password and referenced in manifests using `op://` syntax.
- **Jinja2 Version:** The Home Assistant instance uses Jinja2 v3.1.6, which notably **does not** support the `where` filter.
- **General Goals:**
  - **Performance:** Performance is often prioritized over maximum security (e.g., using `mitigations=off` kernel argument).
  - **Rootless Containers:** Preference for converting applications to run in rootless containers.
- **Monitoring:**
  - The cluster is monitored by Prometheus & Grafana.
  - Alerts (like `KubeAPIErrorBudgetBurn`) originate from the standard `kube-prometheus` stack.
