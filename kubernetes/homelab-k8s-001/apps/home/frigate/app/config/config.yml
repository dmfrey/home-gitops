# yaml-language-server: $schema=https://frigate.dmfrey.com/api/config/schema.json
logger:
  default: info
  # logs:
  #   frigate.record: debug

auth:
  enabled: False
  trusted_proxies:
    - 172.22.0.0/16
    - 172.23.0.0/16

mqtt:
  host: mosquitto.home.svc.cluster.local
  topic_prefix: frigate
  user: "{FRIGATE_MQTT_USERNAME}"
  password: "{FRIGATE_MQTT_PASSWORD}"

database:
  path: /config/frigate.db

# detectors:
#   ov_0:
#     type: openvino
#     device: GPU

go2rtc:
  streams:
    back_door_doorbell_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_BACK_DOOR_DOORBELL}
    barn_door_camera_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_BARN_DOOR_CAMERA}
    driveway_camera_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_DRIVEWAY_CAMERA}
    front_door_doorbell_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_FRONT_DOOR_DOORBELL}
    front_yard_camera_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_FRONT_YARD_CAMERA}
    garden_camera_stream:
      - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_GARDEN_CAMERA}
    # kitchen_display_stream:
    #   - nest:?client_id={FRIGATE_NEST_OAUTH_CLIENT_ID}&client_secret={FRIGATE_NEST_OAUTH_CLIENT_SECRET}&refresh_token={FRIGATE_NEST_DEVICE_REFRESH_TOKEN}&project_id={FRIGATE_NEST_DEVICE_ACCESS_PROJECT_ID}&device_id={FRIGATE_NEST_CAMERA_ID_KITCHEN_DISPLAY}

objects:
  track:
    - person
    - car
    - dog
  # filters:
  #   person:
  #     min_area: 2500
  #     max_area: 100000
  #     threshold: 0.7

record:
  enabled: true
  retain:
    days: 14
    mode: all
  # events:
  #   retain:
  #     default: 14
  #     # mode: active_objects

snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 30

cameras: # {}
  back_door_doorbell:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/back_door_doorbell_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  barn_door_camera:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/barn_door_camera_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  driveway_camera:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/driveway_camera_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  front_door_doorbell:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/front_door_doorbell_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  front_yard_camera:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/front_yard_camera_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  garden_camera:
    ffmpeg:
      inputs:
        # Use go2rtc stream name defined above in go2rtc.streams
        # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
        - path: rtsp://127.0.0.1:8554/garden_camera_stream
          roles:
            - detect
            - record # Or clips
      hwaccel_args: preset-vaapi
    detect:
      enabled: True
      # ... your detection settings ...
    record:
      enabled: True
      # ... your recording settings ...

  # kitchen_display:
  #   ffmpeg:
  #     inputs:
  #       # Use go2rtc stream name defined above in go2rtc.streams
  #       # Point to localhost (127.0.0.1) because go2rtc runs inside the Frigate container
  #       - path: rtsp://127.0.0.1:8554/kitchen_display_stream
  #         roles:
  #           - detect
  #           - record # Or clips
  #   detect:
  #     enabled: True
  #     # ... your detection settings ...
  #   record:
  #     enabled: True
  #     # ... your recording settings ...
