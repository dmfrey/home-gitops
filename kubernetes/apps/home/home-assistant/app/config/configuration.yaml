# Loads default set of integrations. Do not remove.
default_config:

system_health:

prometheus:
  namespace: home-assistant

http:
  server_host: 0.0.0.0
  ip_ban_enabled: true
  login_attempts_threshold: 5
  use_x_forwarded_for: true
  trusted_proxies:
    - 172.22.0.0/15
    - 192.0.0.0/9
    - 192.168.31.0/24
    - 127.0.0.1
    - ::1

homeassistant:
  # Name of the location where Home Assistant is running
  name: ${ORGANIZATION}
  # Location required to calculate the time the sun rises and sets
  latitude: !env_var HASS_LATITUDE
  longitude: !env_var HASS_LONGITUDE
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 210.81
  # metric for Metric, imperial for Imperial
  unit_system: imperial
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: ${TIMEZONE}
  country: US
  packages: !include_dir_named hass-config.git/packages
  external_url: https://home.${SECRET_DOMAIN}
  internal_url: http://${SVC_HASS_ADDR}:8123

recorder:
  db_url: !env_var HASS_RECORDER_DB_URL

# automation:
#   - id: update_config_github_push_event
#     alias: Event | GitHub | Push

#     trigger:
#     - platform: webhook
#       webhook_id: !env_var HASS_DEPLOY_CONFIG_WEBHOOK_ID
#       local_only: false

#     action:
#     - service: shell_command.deploy_config
#     - service: homeassistant.reload_all

# shell_command:
#   deploy_config: cd /config/hass-config.git && git pull || git reset origin/main && git reset origin/main --hard

# automation: !include_dir_merge_list automations
binary_sensor: !include_dir_merge_list hass-config.git/binary_sensors
group: !include_dir_merge_named hass-config.git/groups
input_boolean: !include_dir_merge_named hass-config.git/input_booleans
input_button: !include_dir_merge_named hass-config.git/input_buttons
input_datetime: !include_dir_merge_named hass-config.git/input_datetimes
input_number: !include_dir_merge_named hass-config.git/input_numbers
input_select: !include_dir_merge_named hass-config.git/input_selects
input_text: !include_dir_merge_named hass-config.git/input_texts
notify: !include hass-config.git/notify.yaml
scene: !include hass-config.git/scenes.yaml
schedule: !include_dir_merge_named hass-config/schedule
script: !include_dir_merge_named hass-config.git/scripts
sensor: !include_dir_merge_list hass-config.git/sensors
template: !include_dir_merge_list hass-config.git/templates

frontend:
  themes: !include_dir_merge_named hass-config.git/themes

zeroconf:

zone: !include hass-config.git/zone.yaml

logger:
  default: info
  logs:
    homeassistant.components.mqtt: warning

# configuration.yaml entry which defines a Home Assistant sensor from MQTT
mqtt:
  sensor:
    - name: "propane_tank_1_sensor_voltage"
      state_topic: "propane/1/voltage"
      value_template: "{{ value }}"
      unit_of_measurement: "units"
    - name: "propane_tank_1_percentage"
      state_topic: "propane/1/percentage"
      value_template: "{{ value }}"
      unit_of_measurement: "%"

# panel_iframe:
#   mass:
#     title: "Music Assistant"
#     url: "https://music.${SECRET_DOMAIN}"
