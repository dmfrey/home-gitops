apiVersion: volsync.backube/v1alpha1                                                                                                                                                                                                                                                               
kind: ReplicationSource                                                                                                                                                                                                                                                                            
metadata:                                                                                                                                                                                                                                                                                          
  annotations:                                                                                                                                                                                                                                                                                     
    vpn.home.arpa/enabled: "false"                                                                                                                                                                                                                                                                 
  # creationTimestamp: "2024-05-11T00:49:08Z"                                                                                                                                                                                                                                                        
  # generation: 1                                                                                                                                                                                                                                                                                    
  labels:                                                                                                                                                                                                                                                                                          
    app.kubernetes.io/name: home-assistant                                                                                                                                                                                                                                                                 
    kustomize.toolkit.fluxcd.io/name: cluster-apps-home-assistant                                                                                                                                                                                                                                          
    kustomize.toolkit.fluxcd.io/namespace: flux-system                                                                                                                                                                                                                                             
  name: home-assistant                                                                                                                                                                                                                                                                                     
  namespace: home
  # resourceVersion: "30421524"                                                                                                                                                                                                                                                                      
  # uid: 3bf71d6f-75d0-4517-9b19-f2f0ef25bedc                                                                                                                                                                                                                                                        
spec:                                                                                                                                                                                                                                                                                              
  restic:                                                                                                                                                                                                                                                                                          
    cacheCapacity: 2Gi                                                                                                                                                                                                                                                                             
    cacheStorageClassName: ceph-block                                                                                                                                                                                                                                                              
    copyMethod: Snapshot
    moverPodLabels:
      vpn.home.arpa/enabled: "false"
    moverSecurityContext:                                                                                                                                                                                                                                                                          
      fsGroup: 0
      runAsGroup: 0
      runAsUser: 0
    pruneIntervalDays: 7                                                                                                                                                                                                                                                                           
    repository: home-assistant-volsync-minio                                                                                                                                                                                                                                                               
    retain:                                                                                                                                                                                                                                                                                        
      daily: 7                                                                                                                                                                                                                                                                                     
      hourly: 24                                                                                                                                                                                                                                                                                   
      weekly: 5                                                                                                                                                                                                                                                                                    
    storageClassName: ceph-block                                                                                                                                                                                                                                                                   
    volumeSnapshotClassName: ceph-block                                                                                                                                                                                                                                                            
  sourcePVC: home-assistant-config
  trigger:
    schedule: 40 * * * *